<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org">
<head>
    <meta charset="ISO-8859-1">
    <title>Shopping Cart</title>
    <link rel="stylesheet" th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css}"
          integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <link th:href="@{/css/style.css}" rel="stylesheet"/>
     	
     	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
     	<script th:src="@{/js/adminlc.js}"></script>
    
    <style>
        /* Add your custom CSS styles for visual enhancements */
    </style>
</head>
<body>
<div class="container">
    <h2>Your Shopping Cart</h2>
    <div th:if="${#lists.isEmpty(cart)}">
        <p>Your cart is empty. <a href="/">Continue Shopping</a></p>
    </div>
    <div th:if="${not #lists.isEmpty(cart)}">
        <table class="table" id="customers">
            <thead class="thead-dark" id="customers">
            
            </thead>
            <tbody>
            
            </tbody>
        </table>
         <div class="text-right">
      <!--      <h4>Total: <span th:text="${#numbers.formatDecimal(totalPrice, 2, 'COMMA', 2)}"></span></h4>  -->
            
            <button class="btn btn-primary" >
            <a th:href="@{/ordernow}" style="color: white;">
            Order Now</a></button>

			<button class="btn btn-danger">
		    <a th:href="@{/allproducts}" style="color: white;">Continue Shopping</a>
		    </button>
            
        </div> 
        
    </div>
 <script type="text/javascript">
$(document).ready(function(){

    // Retrieve cartItems from local storage or initialize an empty array
    var cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];

    // Append table header row
    $("#customers").append("<tr><th>Product</th><th>Name</th><th>Price</th><th>Quantity</th><th>Total Price</th></tr>");

    // Iterate over the cartItems array and append table rows
    cartItems.forEach((item)=>{
        $("#customers").append(`<tr><td><img src="/css/images/${item.image_Filename}" alt="Product Image" width="100px" height="100px"></td>
        <td>${item.item_title}</td><td>${item.price}</td><td>${item.quantity}</td>
        <td>${item.quantity * item.price}</td></tr>
        
        `);
    });

    // Display an alert to indicate that the code is working
//    alert("working");

});
</script>
</body>
</html>
<!--  
<td>
<td>
    	<input type="hidden" id="id" name="id" th:value="${item.id}">
            <a class="btn btn-danger" onclick="removeCartItem()" 
               >Remove</a>
        </td>
    	<input type="hidden" id="id" name="id" th:value="${item.id}">
            <a class="btn btn-danger" onclick="removeCartItem()" 
               >Remove</a>
        </td>
<tbody>
            <tr th:each="item : ${cart}">
                 <td>
  			        <img th:src="@{'/css/images/' + ${item.image_name}}" alt="Product Image" width="100px" height="100px">
                    <span th:text="${item_title}"></span>
                </td>  
            <!--       
                    <span th:text="${item.item_title}"></span>
             <input type="number" min="1" th:value="${quantity}" class="quantity-input">
                 <td>
                     <span th:text="${item.item_title}"></span>
                </td>
                -->
            <!--     <td>
  					 <span th:text="${item.quantity}"></span>
                </td>
                <td>
                    <span th:text="${item.price}"></span>
                </td>
                <td>
                    <span th:text="${item.price * item.quantity}"></span>
                </td>
            <!--    
                     <a class="btn btn-primary" th:href="@{categoryedit/{id}(id=${item.id})}">Edit</a>
                     
                     onclick="return confirm('Are you sure you want to remove this item from the cart?')"
                -->
      <!--       	<td>
            	<input type="hidden" id="id" name="id" th:value="${item.id}">
                    <a class="btn btn-danger" onclick="removeCartItem('${item.id}')" th:href="@{/removecart/{id}(id=${item.id})}"
                       >Remove</a>
                </td> 
            </tr>
            </tbody>
 -->
